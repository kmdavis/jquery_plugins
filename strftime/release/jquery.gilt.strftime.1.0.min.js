/**
 * Format Times
 *
 * @version 1.0
 * @requires jQuery v1.3
 * @author Anthony Manfredi, Kevan Davis
 * @copyright Copyright (c) 2010, Gilt Groupe
 *
 * Distributed under the terms of the GNU General Public License
 * http://www.gnu.org/licenses/gpl-3.0.html
 *
 */
(function(e){e.strftime=function(d,c){var j=/[a-z() ]/g;c=e.extend({},e.fn.strftime.defaults,c);var g=c.format,b=new Date,a={},h,f=function(i,l,m){for(i=i.toString();i.length<m;)i=l+i;return i},k={c:"",D:"%m/%d/%y",F:"%Y-%m-%d",r:"%I:%M:%S %p",R:"%H:%M",T:"%H:%M:%S",x:"",X:""};b.setTime(Date.parse(d));d=b.toString();d=/(\: *\d{2} *)([a-z]+)([\-\+]\d+)? *\(?([a-z ]+)?/i.exec(d)||[];d[3]||(d[4]=d[2]);d=d[4]?d[4]:d[2]+d[3];a.z=c.utc?"UTC":d.replace(j,"");a.Z=a.z;a.w=c.utc?b.getUTCDay():b.getDay();a.u= a.w+1;a.j=f(Math.ceil((b.getTime()-(new Date(b.getFullYear(),0,1)).getTime())/864E5),"0",3);a.a=c.locale.daysShort[a.w];a.A=c.locale.daysLong[a.w];a.d=c.utc?b.getUTCDate():b.getDate();a.e=f(a.d," ",2);a.d=f(a.d,"0",2);a.m=b.getMonth();a.b=c.locale.monthsShort[a.m];a.h=a.b;a.B=c.locale.monthsLong[a.m];a.L=f(a.m+1," ",2);a.m=f(a.m+1,"0",2);a.y=b.getYear()%100;a.Y=c.utc?b.getUTCFullYear():b.getFullYear();a.C=f(Math.floor(a.Y/100),"0",2);j=(Math.floor(1.25*(a.Y-1))-Math.floor((a.Y-1)/100)+Math.floor((a.Y- 1)/400)+1)%7;d=(Math.floor(1.25*(a.Y-2))-Math.floor((a.Y-2)/100)+Math.floor((a.Y-2)/400)+1)%7;a.U=Math.ceil((b.getTime()-(new Date(a.Y,0,1+(7-j))).getTime())/6048E5);if(0===a.U)a.U=Math.ceil((b.getTime()-(new Date(a.Y-1,0,1+(7-d))).getTime())/6048E5);a.W=Math.ceil((b.getTime()-(new Date(a.Y,0,1+(7-(j+1)%7))).getTime())/6048E5);if(0===a.W)a.W=Math.ceil((b.getTime()-(new Date(a.Y-1,0,1+(7-(d+1)%7))).getTime())/6048E5);a.V=a.W;a.g=f("01"===a.m&&a.V>51?(a.Y-1)%100:a.y,"0",2);a.G="01"===a.m&&a.V>51?a.Y- 1:a.Y;a.H=c.utc?b.getUTCHours():b.getHours();a.I=12<a.H?a.H-12:a.H;a.H=f(a.H,"0",2);a.l=f(a.I," ",2);a.I=f(a.I,"0",2);a.M=f(c.utc?b.getUTCMinutes():b.getMinutes(),"0",2);a.S=f(c.utc?b.getUTCSeconds():b.getSeconds(),"0",2);a.p=12<parseInt(a.H,0)?c.locale.pm:c.locale.am;a.P=a.p.toLowerCase();a.s=b.getTime();a.n="<br/>";a.t="&nbsp;&nbsp;";a["%"]="%";a.N="";if("00"===a.H)a.N=c.locale.midnight;else if("12"===a.H.toString())a.N=c.locale.noon;for(h in k)if(k.hasOwnProperty(h))g=g.replace(new RegExp("%"+ h,"g"),k[h]);for(h in a)if(a.hasOwnProperty(h))if("N"!==h)g=g.replace(new RegExp("%"+h,"g"),a[h]);if(/\%N/.test(g)){g=g.replace(/00\s?am\s?\%N|12\s?pm\s?\%N|\%N/ig,a.N);g=g.replace(/\%N/g,a.N)}return g};e.fn.strftime=function(d){this.each(function(){var c=e.extend({},d);e(this).attr("data-date-format")&&e.extend(c,{format:e(this).attr("data-date-format")});if(""!==e(this).val())e(this).val(e.strftime(e(this).val(),c));else""!==e(this).html()&&e(this).html(e.strftime(e(this).html(),c))});return this}; e.fn.strftime.defaults={format:"%L/%e %I%p%N %z",utc:false,locale:{midnight:"MIDNIGHT",noon:"NOON",am:"AM",pm:"PM",daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysLong:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"]}}})(jQuery);
