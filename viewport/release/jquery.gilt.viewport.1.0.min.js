/*
 * Viewport - jQuery selectors for finding elements in viewport
 *
 * Copyright (c) 2008-2009 Mika Tuupola
 * Copyright (c) 2010 Kevan Davis, Gilt Groupe
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/viewport
 *
 * Gilt Groupe Modification:
 *   Added :below(selector), :above(selector), :right-of(selector), :left-of(selector),
 *   :with-in(selector) selectors.  Behave same as existing selectors, but relative to
 *   the first element returned by a selector.  :with-in requires that part of the
 *   matched element be within the selected element.
 */
(function(a){a.fn.belowthefold=function(b){return a.below(this,window,b)};a.fn.abovethetop=function(b){return a.above(this,window,b)};a.fn.rightofscreen=function(b){return a.rightof(this,window,b)};a.fn.leftofscreen=function(b){return a.leftof(this,window,b)};a.fn.inviewport=function(b){return a.within(this,window,b)};a.fn.below=function(b,c){return a.below(this,b,c)};a.fn.above=function(b,c){return a.above(this,b,c)};a.fn.rightof=function(b,c){return a.rightof(this,b,c)};a.fn.leftof=function(b,c){return a.leftof(this, b,c)};a.fn.within=function(b,c){return a.within(this,b,c)};a.belowthefold=function(b,c){return a.below(b,window,c)};a.abovethetop=function(b,c){return a.above(b,window,c)};a.rightofscreen=function(b,c){return a.rightof(b,window,c)};a.leftofscreen=function(b,c){return a.leftof(b,window,c)};a.inviewport=function(b,c){return a.within(b,window,c)};var e={threshold:0};a.below=function(b,c,d){d=a.extend({},e,d);return a(c).height()+Math.ceil((a(c).offset()||{top:0}).top)<=Math.ceil((a(b).offset()||{top:0}).top)- d.threshold};a.above=function(b,c,d){d=a.extend({},e,d);return Math.ceil((a(c).offset()||{top:0}).top)>=Math.ceil((a(b).offset()||{top:0}).top)+a(b).height()-d.threshold};a.rightof=function(b,c,d){d=a.extend({},e,d);return a(c).width()+Math.ceil((a(c).offset()||{left:0}).left)<=Math.ceil((a(b).offset()||{left:0}).left)-d.threshold};a.leftof=function(b,c,d){d=a.extend({},e,d);return Math.ceil((a(c).offset()||{left:0}).left)>=Math.ceil((a(b).offset()||{left:0}).left)+a(b).width()-d.threshold};a.within= function(b,c,d){return!a.rightof(b,c,d)&&!a.leftof(b,c,d)&&!a.below(b,c,d)&&!a.above(b,c,d)};a.extend(a.expr[":"],{"below-the-fold":function(b){return a.below(b,window,{threshold:0})},"above-the-top":function(b){return a.above(b,window,{threshold:0})},"right-of-screen":function(b){return a.rightof(b,window,{threshold:0})},"left-of-screen":function(b){return a.leftof(b,window,{threshold:0})},"in-viewport":function(b){return a.within(b,window,{threshold:0})},below:function(b,c,d){return a.below(b,d[d.length- 1],{threshold:0})},above:function(b,c,d){return a.above(b,d[d.length-1],{threshold:0})},"right-of":function(b,c,d){return a.rightof(b,d[d.length-1],{threshold:0})},"left-of":function(b,c,d){return a.leftof(b,d[d.length-1],{threshold:0})},"with-in":function(b,c,d){return a(b).not(d[d.length-1]).length>0&&a.within(b,d[d.length-1],{threshold:0})}})})(jQuery);
